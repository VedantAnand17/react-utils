# Babel Configurations
Standard [Babel](https://babeljs.io/) configs.

- [**config/babel/node-ssr**](#node-ssr) &mdash; Babel config for NodeJS
  compilation of JS and JSX modules (server-side ReactJS rendering);

- [**config/babel/webpack**](#webpack) &mdash; Babel config for Webpack
  compilation of JS and JSX modules.

Use them as presets in your `.babelrc`, e.g.
```json
{
  "presets": ["@dr.pogodin/react-utils/config/babel/node-ssr"]
}
```

To set options provided by a preset:
```json
{
  "presets": [
    ["@dr.pogodin/react-utils/config/babel/node-ssr", {
      "someOption": "optionValue"
    }]
  ]
}
```

As the presets are JS modules, you can also wrap them into your own JS code to
create a special preset that customizes Babel configuration in any necessary
way. If you feel that the modification you need is useful for any generic
ReactJS app, feel free to open GitHub issue ticket to discuss an update of our
default configurations.

These presets may behave differently in different Babel environments. You can
set the environment with `BABEL_ENV` environment variable, or `envName` Babel
option.

### Configuration Details

- <a name="node-ssr">**`config/babel/node-ssr.json`**</a> &mdash; Babel
configuration for NodeJS compilation of JS and JSX modules (server-side ReactJS
rendering);

  **Supported Options:**
  - `baseAssetsOutputPath` {_string_} &ndash; Optional. The base path for assets
    output. Defaults empty string.
  - `noStyling` {_boolean_} &ndash; Optional. If `true` the preset will exclude
    any presets and plugins related to (S)CSS processing.

  **Details:**

  - Imports presets: [env](https://www.npmjs.com/package/babel-preset-env),
  [react](https://www.npmjs.com/package/babel-preset-react),
  [stage-2](https://www.npmjs.com/package/babel-preset-stage-2);

  - Uses [`babel-plugin-css-modules-transform`](https://www.npmjs.com/package/babel-plugin-css-modules-transform)
  to convertCSS and SCSS imports into objects with keys and values being the
  original and transformed class names. The transformed class names will match
  the class names generated by the `@dr.pogodin/babel-plugin-react-css-modules`
  plugin, mentioned below;

  - Uses [`@babel/plugin-syntax-dynamic-import`](https://www.npmjs.com/package/@babel/plugin-syntax-dynamic-import)
  to support dynamic `import(..)` statemens;

  - Uses [`@dr.pogodin/babel-preset-svgr`](https://www.npmjs.com/package/@dr.pogodin/babel-preset-svgr)
  to embed imported SVG files into the complied JS modules with the help of
  [SVGR library](https://github.com/smooth-code/svgr);

  - Uses [`babel-plugin-module-resolver`](https://www.npmjs.com/package/babel-plugin-module-resolver)
  to setup the following paths as the roots for resolution of relative imports:
  `./src/shared`, `./src`. It will also apply path resolution to the first
  argument of `resolveWeak(..)` functions encountered in the compiled code;

  - Uses [`@dr.pogodin/babel-plugin-react-css-modules`](https://www.npmjs.com/package/@dr.pogodin/babel-plugin-react-css-modules)
  to transform `styleName` props of ReactJS components into globally unique
  `className` props. Generated class names are verbose in *development* and
  *test* Babel environments, for the ease of debugging; and they are short
  6-symbols hashes in the *production* Babel environment, for compactness of the
  compiled JS and CSS modules;

  - Uses [`babel-plugin-tranform-assets`](https://www.npmjs.com/package/@dr.pogodin/babel-plugin-transform-assets)
  to convert GIF, JPEG, JPG, and PNG imports into
  `/images/[FILE_HASH].[FILE_EXTENSION]` URL strings. Use the
  **`baseAssetsOutputPath`** preset option to prefix generated paths with an
  arbitrary path;

  - Uses [`babel-plugin-transform-runtime`](https://www.npmjs.com/package/babel-plugin-transform-runtime)
  to optimize complied JS modules (it externalizes references to helpers and
  builtins, automatically polyfilling the code without polluting globals).
